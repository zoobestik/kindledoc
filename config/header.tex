\usepackage{xcolor}
\usepackage{listings}
\usepackage{fancyvrb}

\definecolor{codebg}{HTML}{F7F7F7} % choose any hex color you like
\definecolor{shadecolor}{HTML}{F7F7F7} % background for code blocks

\lstset{
  backgroundcolor=\color{codebg},
  % optional niceties:
  frame=single,
  rulecolor=\color{black},
  framesep=6pt
}

% Inline code background without soul/fancyvrb
\makeatletter
\let\OldTexttt\texttt
\newcommand{\InlineCode}[1]{%
  \begingroup
  \setlength{\fboxsep}{1.5pt}% padding around inline code
  \colorbox{codebg}{\OldTexttt{#1}}%
  \endgroup
}
\renewcommand{\texttt}[1]{\InlineCode{#1}}
\makeatother
